

This section presents a traversal-friendly specification for RCU (Read-Copy-Update) which is a synchronization mechanism for concurrent data structures. The specification is built on top of the base specification and directly captures the traversal loop invariant. The guard predicate is strengthened to record the set of pointers that are known to have not been detached before the guard was created. The block points-to predicate is introduced to represent the ownership of the fragment of the link topology. The new rule Guard-Protect-BlockPointsTo reflects the intuition that it is safe to traverse the data structure by following the links. Managed-Detach is introduced to mark a block detached only when no other blocks point to it and Managed-Update updates the target of block points-to assertion only if the new target is not yet detached. Finally, Detached-Retire is introduced to ensure that only detached nodes can be retired.